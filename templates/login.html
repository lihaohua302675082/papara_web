<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
        <title>登录</title>
        {% include 'common/header.html' %}
        <link rel="stylesheet" href="{{ url_for('static', filename='admin/css/other/login.css') }}" />
	</head>
    <!-- 代 码 结 构 -->
	<body background="{{ url_for('static', filename='admin/images/background.svg') }}" style="background-size: cover;">
		<form class="layui-form" action="javascript:void(0);">
			<div class="layui-form-item">
				<img class="logo" src="{{ url_for('static', filename='admin/images/logo.png') }}" />
				<div class="title">华 创 资 本</div>
				<div class="desc">
					增 城 区 最 具 影 响 力 的 企 业 之 一
				</div>
			</div>
			<div class="layui-form-item">
				<input name="username" type="text" placeholder="用户名：" lay-verify="required" hover class="layui-input"  />
			</div>
			<div class="layui-form-item">
				<input name="password" type="password" placeholder="密 码" lay-verify="required" hover class="layui-input"  />
			</div>
			<div class="layui-form-item">
				<input type="checkbox" name="" title="记住密码" lay-skin="primary" checked>
			</div>
			<div class="layui-form-item">
				<button type="button" class="pear-btn pear-btn-success login" lay-submit lay-filter="login">
					登 入
				</button>
			</div>
		</form>
		<!-- 资 源 引 入 -->
        {% include 'common/footer.html' %}
		<script>
			layui.use(['form', 'jquery', 'layer', 'button', 'popup'], function () {
				let form = layui.form;
				let $ = layui.jquery;
				let layer = layui.layer;
				let button = layui.button;
				let popup = layui.popup;

                // 登 录 提 交
				form.on('submit(login)', function (data) {
					let loader = layer.load();
					let btn = button.load({elem: '.login'});
					$.ajax({
						url: "/login",
						data: data.field,
						type: "post",
						dataType: 'json',
						success: function (result) {
							layer.close(loader);
							btn.stop(function () {
								if (result.success) {
									popup.success(result.msg, function () {
										location.href = "{{ url_for('index_main') }}";
									})
								} else {
									popup.failure(result.msg, function () {
									});
								}
							})
						}
					});
					return false;
				});
			})
		</script>
	</body>
</html>
